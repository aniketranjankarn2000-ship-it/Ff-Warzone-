<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FF WARZONE</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(180deg,#000,#0a0a0a,#000);
color:white;
text-align:center;
}

h1{
color:#ff0033;
text-shadow:0 0 10px red;
}

.box{
background:#111;
margin:20px auto;
padding:20px;
border-radius:12px;
width:90%;
max-width:420px;
box-shadow:0 0 20px #ff0033;
}

input,button{
width:90%;
padding:10px;
margin:8px;
border-radius:8px;
border:none;
}

button{
background:#ff0033;
color:white;
font-weight:bold;
cursor:pointer;
}

button:hover{
background:#ff1a4d;
}

.hidden{
display:none;
}

.timer{
font-size:20px;
color:#00ffcc;
margin-top:10px;
}
</style>
</head>

<body>

<h1>FF WARZONE</h1>

<!-- HOME -->
<div class="box" id="home">
<h2>Welcome</h2>
<button onclick="show('register')">Player Register</button>
<button onclick="show('login')">Player Login</button>
<button onclick="show('adminlogin')">Admin Login</button>
</div>

<!-- PLAYER REGISTER -->
<div class="box hidden" id="register">
<h2>Player Register</h2>
<input id="reguser" placeholder="Username">
<input id="regpass" placeholder="Password">
<button onclick="register()">Register</button>
</div>

<!-- PLAYER LOGIN -->
<div class="box hidden" id="login">
<h2>Player Login</h2>
<input id="user" placeholder="Username">
<input id="pass" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<!-- ADMIN LOGIN -->
<div class="box hidden" id="adminlogin">
<h2>Admin Login</h2>
<input id="adminuser" placeholder="Admin ID">
<input id="adminpass" placeholder="Password">
<button onclick="adminLogin()">Login</button>
</div>

<!-- PLAYER DASHBOARD -->
<div class="box hidden" id="playerdash">
<h2>Join Tournament</h2>

<p>Entry Fee: ₹50</p>
<p>Per Kill: ₹1</p>
<p>Winner Prize: ₹500</p>

<p>UPI: <b>aniket8764@ptaxis</b></p>

<input type="file" id="payment">
<button onclick="joinTournament()">Submit Payment & Join</button>

<div class="timer" id="countdown"></div>

</div>

<!-- ADMIN PANEL -->
<div class="box hidden" id="adminpanel">
<h2>Admin Panel</h2>

<h3>Pending Players</h3>
<div id="pending"></div>

<h3>Approved Players</h3>
<div id="approved"></div>

<h3>Leaderboard</h3>
<div id="leaderboard"></div>

</div>

<script>

let users = JSON.parse(localStorage.getItem("users")) || [];
let pending = JSON.parse(localStorage.getItem("pending")) || [];
let approved = JSON.parse(localStorage.getItem("approved")) || [];

function show(id){
document.querySelectorAll(".box").forEach(e=>e.classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function register(){
let u = reguser.value;
let p = regpass.value;
users.push({user:u,pass:p});
localStorage.setItem("users",JSON.stringify(users));
alert("Registered!");
show("login");
}

function login(){
let u=user.value;
let p=pass.value;

let match = users.find(x=>x.user==u && x.pass==p);
if(match){
show("playerdash");
startTimer();
}else alert("Wrong ID");
}

function adminLogin(){
if(adminuser.value=="admin" && adminpass.value=="1234"){
show("adminpanel");
loadAdmin();
}else alert("Wrong admin");
}

function joinTournament(){
let file = document.getElementById("payment").files[0];
if(!file){ alert("Upload payment screenshot"); return;}

pending.push({name:user.value});
localStorage.setItem("pending",JSON.stringify(pending));
alert("Sent to admin approval");
}

function loadAdmin(){
let pHTML="";
pending.forEach((p,i)=>{
pHTML += `<p>${p.name}
<button onclick="approve(${i})">Approve</button>
<button onclick="reject(${i})">Reject</button>
</p>`;
});
document.getElementById("pending").innerHTML=pHTML;

let aHTML="";
approved.forEach(a=>{
aHTML+=`<p>${a.name}</p>`;
});
document.getElementById("approved").innerHTML=aHTML;

let lHTML="";
approved.forEach(a=>{
lHTML+=`<p>${a.name} - 0 kills</p>`;
});
document.getElementById("leaderboard").innerHTML=lHTML;
}

function approve(i){
approved.push(pending[i]);
pending.splice(i,1);
localStorage.setItem("pending",JSON.stringify(pending));
localStorage.setItem("approved",JSON.stringify(approved));
loadAdmin();
}

function reject(i){
pending.splice(i,1);
localStorage.setItem("pending",JSON.stringify(pending));
loadAdmin();
}

function startTimer(){
let end = new Date().getTime()+3600000;
let x=setInterval(function(){
let now=new Date().getTime();
let dist=end-now;
let m=Math.floor((dist%(1000*60*60))/(1000*60));
let s=Math.floor((dist%(1000*60))/1000);
document.getElementById("countdown").innerHTML="Match starts in "+m+"m "+s+"s";
},1000);
}

</script>

</body>
</html>
